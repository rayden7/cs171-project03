<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<meta charset="utf-8">
<head>
    <title>D3 Line Graph</title>
    <link rel="stylesheet" type="text/css" href="../css/svg4.css"/>

    <!-- Link to d3 library or change path to local copy -->
    <!--<script src="http://d3js.org/d3.v3.min.js"></script>-->
    <script src="../js/d3.v3.min.js"></script>
</head>
<body>
<h1 id="chartTitle" />
<script>

// this page is an adaptation of an example page here: http://bl.ocks.org/mbostock/3883245

var silverPrices = {
    "title": "SLV Daily Prices 2012-2013",
    "x": {"title" : "Date", "units" : "Day" },
    "y": {"title" : "Closing Price", "units" : "Dollars" },
    "points": [
        ["Date","Close"],
        ["3/12/12",32.63],
        ["3/13/12",32.26],
        ["3/14/12",31.27],
        ["3/15/12",31.53],
        ["3/16/12",31.59],
        ["3/19/12",31.98],
        ["3/20/12",31.15],
        ["3/21/12",31.21],
        ["3/22/12",30.54],
        ["3/23/12",31.24],
        ["3/26/12",31.94],
        ["3/27/12",31.59],
        ["3/28/12",31.15],
        ["3/29/12",31.35],
        ["3/30/12",31.38],
        ["4/2/12",32.05],
        ["4/3/12",31.65],
        ["4/4/12",30.33],
        ["4/5/12",30.72],
        ["4/9/12",30.59],
        ["4/10/12",30.79],
        ["4/11/12",30.65],
        ["4/12/12",31.42],
        ["4/13/12",30.55],
        ["4/16/12",30.56],
        ["4/17/12",30.80],
        ["4/18/12",30.64],
        ["4/19/12",30.80],
        ["4/20/12",30.75],
        ["4/23/12",29.97],
        ["4/24/12",29.93],
        ["4/25/12",29.86],
        ["4/26/12",30.18],
        ["4/27/12",30.37],
        ["4/30/12",30.11],
        ["5/1/12",30.06],
        ["5/2/12",29.78],
        ["5/3/12",29.29],
        ["5/4/12",29.41],
        ["5/7/12",29.21],
        ["5/8/12",28.65],
        ["5/9/12",28.38],
        ["5/10/12",28.25],
        ["5/11/12",28.08],
        ["5/14/12",27.42],
        ["5/15/12",26.86],
        ["5/16/12",26.37],
        ["5/17/12",27.24],
        ["5/18/12",27.79],
        ["5/21/12",27.68],
        ["5/22/12",27.34],
        ["5/23/12",27.05],
        ["5/24/12",27.44],
        ["5/25/12",27.62],
        ["5/29/12",27.10],
        ["5/30/12",27.12],
        ["5/31/12",26.96],
        ["6/1/12",27.62],
        ["6/4/12",27.46],
        ["6/5/12",27.72],
        ["6/6/12",28.51],
        ["6/7/12",27.79],
        ["6/8/12",27.75],
        ["6/11/12",27.79],
        ["6/12/12",28.12],
        ["6/13/12",28.01],
        ["6/14/12",27.82],
        ["6/15/12",27.81],
        ["6/18/12",27.87],
        ["6/19/12",27.64],
        ["6/20/12",27.26],
        ["6/21/12",26.12],
        ["6/22/12",26.15],
        ["6/25/12",26.71],
        ["6/26/12",26.30],
        ["6/27/12",26.13],
        ["6/28/12",25.63],
        ["6/29/12",26.65],
        ["7/2/12",26.73],
        ["7/3/12",27.49],
        ["7/5/12",26.88],
        ["7/6/12",26.30],
        ["7/9/12",26.54],
        ["7/10/12",26.06],
        ["7/11/12",26.25],
        ["7/12/12",26.35],
        ["7/13/12",26.44],
        ["7/16/12",26.49],
        ["7/17/12",26.47],
        ["7/18/12",26.42],
        ["7/19/12",26.42],
        ["7/20/12",26.48],
        ["7/23/12",26.21],
        ["7/24/12",26.22],
        ["7/25/12",26.53],
        ["7/26/12",26.71],
        ["7/27/12",26.96],
        ["7/30/12",27.36],
        ["7/31/12",27.12],
        ["8/1/12",26.54],
        ["8/2/12",26.31],
        ["8/3/12",26.96],
        ["8/6/12",27.11],
        ["8/7/12",27.27],
        ["8/8/12",27.21],
        ["8/9/12",27.29],
        ["8/10/12",27.26],
        ["8/13/12",26.92],
        ["8/14/12",26.96],
        ["8/15/12",26.97],
        ["8/16/12",27.37],
        ["8/17/12",27.23],
        ["8/20/12",27.95],
        ["8/21/12",28.37],
        ["8/22/12",28.92],
        ["8/23/12",29.60],
        ["8/24/12",29.74],
        ["8/27/12",29.74],
        ["8/28/12",29.93],
        ["8/29/12",29.75],
        ["8/30/12",29.44],
        ["8/31/12",30.79],
        ["9/4/12",31.36],
        ["9/5/12",31.27],
        ["9/6/12",31.67],
        ["9/7/12",32.64],
        ["9/10/12",32.29],
        ["9/11/12",32.41],
        ["9/12/12",32.21],
        ["9/13/12",33.61],
        ["9/14/12",33.60],
        ["9/17/12",32.99],
        ["9/18/12",33.71],
        ["9/19/12",33.57],
        ["9/20/12",33.58],
        ["9/21/12",33.48],
        ["9/24/12",32.93],
        ["9/25/12",32.68],
        ["9/26/12",32.87],
        ["9/27/12",33.58],
        ["9/28/12",33.48],
        ["10/1/12",33.65],
        ["10/2/12",33.50],
        ["10/3/12",33.51],
        ["10/4/12",33.93],
        ["10/5/12",33.45],
        ["10/8/12",32.97],
        ["10/9/12",32.83],
        ["10/10/12",32.95],
        ["10/11/12",32.90],
        ["10/12/12",32.45],
        ["10/15/12",31.66],
        ["10/16/12",31.93],
        ["10/17/12",32.12],
        ["10/18/12",31.73],
        ["10/19/12",31.09],
        ["10/22/12",31.39],
        ["10/23/12",30.68],
        ["10/24/12",30.71],
        ["10/25/12",31.12],
        ["10/26/12",31.08],
        ["10/31/12",31.27],
        ["11/1/12",31.22],
        ["11/2/12",29.95],
        ["11/5/12",30.17],
        ["11/6/12",31.01],
        ["11/7/12",30.83],
        ["11/8/12",31.38],
        ["11/9/12",31.54],
        ["11/12/12",31.37],
        ["11/13/12",31.40],
        ["11/14/12",31.64],
        ["11/15/12",31.53],
        ["11/16/12",31.21],
        ["11/19/12",32.05],
        ["11/20/12",32.11],
        ["11/21/12",32.29],
        ["11/23/12",32.98],
        ["11/26/12",33.02],
        ["11/27/12",32.93],
        ["11/28/12",32.62],
        ["11/29/12",33.13],
        ["11/30/12",32.36],
        ["12/3/12",32.52],
        ["12/4/12",31.90],
        ["12/5/12",31.82],
        ["12/6/12",31.93],
        ["12/7/12",32.03],
        ["12/10/12",32.14],
        ["12/11/12",31.91],
        ["12/12/12",32.37],
        ["12/13/12",31.53],
        ["12/14/12",31.17],
        ["12/17/12",31.20],
        ["12/18/12",30.65],
        ["12/19/12",30.11],
        ["12/20/12",29.00],
        ["12/21/12",29.00],
        ["12/24/12",28.94],
        ["12/26/12",29.01],
        ["12/27/12",29.24],
        ["12/28/12",29.10],
        ["12/31/12",29.37],
        ["1/2/13",29.92],
        ["1/3/13",29.18],
        ["1/4/13",29.24],
        ["1/7/13",29.18],
        ["1/8/13",29.38],
        ["1/9/13",29.35],
        ["1/10/13",29.78],
        ["1/11/13",29.48],
        ["1/14/13",30.04],
        ["1/15/13",30.36],
        ["1/16/13",30.45],
        ["1/17/13",30.67],
        ["1/18/13",30.81],
        ["1/22/13",31.12],
        ["1/23/13",31.19],
        ["1/24/13",30.65],
        ["1/25/13",30.21],
        ["1/28/13",29.85],
        ["1/29/13",30.32],
        ["1/30/13",30.92],
        ["1/31/13",30.44],
        ["2/1/13",30.78],
        ["2/4/13",30.69],
        ["2/5/13",30.76],
        ["2/6/13",30.81],
        ["2/7/13",30.46],
        ["2/8/13",30.43],
        ["2/11/13",30.00],
        ["2/12/13",30.09],
        ["2/13/13",29.77],
        ["2/14/13",29.46],
        ["2/15/13",28.83],
        ["2/19/13",28.45],
        ["2/20/13",27.59],
        ["2/21/13",27.73],
        ["2/22/13",27.83],
        ["2/25/13",28.07],
        ["2/26/13",28.41],
        ["2/27/13",28.01],
        ["2/28/13",27.54],
        ["3/1/13",27.62],
        ["3/4/13",27.60],
        ["3/5/13",27.75],
        ["3/6/13",28.10],
        ["3/7/13",27.91],
        ["3/8/13",28.01],
        ["3/11/13",28.02]
    ]
};

// use the silverPrices data element to define the page title
document.getElementById("chartTitle").innerHTML = silverPrices.title;


var margin = {top: 20, right: 20, bottom: 30, left: 50},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

var parseDate = d3.time.format("%m/%d/%y").parse;

var x = d3.time.scale()
        .range([0, width]);

var y = d3.scale.linear()
        .range([height, 0]);

var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left");

var line = d3.svg.line()
        .x(function(d) { return x(d.date); })
        .y(function(d) { return y(d.close); });

var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// prepare the data defined previously for use by D3
var data = JSON.parse(JSON.stringify(silverPrices));

// remove the first header element that is an array with "Date" and "Close" elements
data.points.shift();

// parse out each elemnt in the points array and give each element "date" and "close" properties
data.points.forEach(function(d) {
    d.date = parseDate(d[0]);
    d.close = +d[1];
});

x.domain(d3.extent(data.points, function(d) { return d.date; }));
y.domain(d3.extent(data.points, function(d) { return d.close; }));

svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

svg.append("g")
        .attr("class", "y axis")
        .call(yAxis)
        .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text("Price ($)");

svg.append("path")
        .datum(data.points)
        .attr("class", "line")
        .attr("d", line);

</script>
</body>
</html>